### Virtual machine (IaaS)
- The hierarchy of azure account is Azure account -> subscription -> resource group -> resources.
- The resource group is assigned to a specific region.
- Each resource must be assigned to a resource group.
- It is not necessary that the resources in the resource group be in its region.
- The account can have more than one subscription.
- We can scale up the OS disk, but we have to deallocate and stop the machine.
- We can scale up the attached disks while the machine is running.
- We can NOT scale down the size of OS disk or attached disks, but we can make it by creating a new smaller disk and transfer the data to it, finally we delete the large disk.
---
### App service (PaaS)
- The cloud provider configure the environment for you (infra + OS + licence), and you only publishing the code or the app.
- The way of publishing our website:
	- 1- Create the app service (choose the framework and OS and its size ..etc).
	- 2- Type your code on VS and sign in with the azure account.
	- 3- Publish the website through the VS (you can create the app service in this step).
---
### Virtual network
- We need to make our private network to put the resources in it, so they can communicate with each other, or we can connect them with on-prem infrastructure.
- When we configure the virtual network, it will ask about the *address space* which is used to create subnets from it.
	- For example if the address space is 192.168.0.0/16, we can create subnet 1 = 192.168.1.0/24, subnet 2 =192.168.2.0/24 and so on
	- We create subnets based on the total number of IP addresses in the address space, it means the total number of IPs in all subnets must = the total number of IPs of the address space.
- Once the resource is put in the subnet, it takes private IP form its range, and it can be changed manually.
- If there is a DHCP server in the subnet, it will start assign configuration starting from fourth IP as first 3 are booked.
	- Example: subnet-A 192.168.1.0/24
		- 192.168.1.0 -> Network ID.
		- 192.168.1.1 -> GW.
		- 192.168.1.2 -> DNS.
		- 192.168.1.3 -> DNS.
		- 192.168.1.4 to 192.168.1.254 -> usable IPs.
		- 192.168.1.255 -> Broadcast.
- Public IP is a resource you can create it and assign it to a virtual machine while creating it.
- There is 2 types of public IP on azure:
	- 1- Basic: allow all inbound traffic by default and not secure (VM exposed to the internet), and it changes after restarting the VM.
	- 2- Standard: block all inbound traffic by default, and requires NSG to allow specific inbound traffic (VM is isolated by default), it is fixed for the VM.
- NIC is a resource that can be attached to VM to allow it has connection with 2 subnets for example as each NIC has private IP form specific subnet.
---
### NSG
- Network security group which like simple firewall used to specify which traffic to go inbound or outbound.
- NSG is assigned to NIC or subnet.
- NSG and VM in same region.
---
### Storage
- First we have to make storage account and it has unique name globally
- we have 2 types of storage account:
	- 1- General purpose V2 (HDD).
	- 2- Premium (SSD).
- #### General purpose V2 storage account
- 1- Blob: it is used with unstructured data and put the data in container, the container may be:
	- Block blob -> store the unstructured data like audio, video, files.
	- Page blob -> store VM disk files (VMDK, VHD, VHDX).
	- Append blob -> store logs.

- 2- File: it likes the file sharing but it can be SMB (Windows file sharing) and NFS (Linux), also used for migration through Azure file sync by making network file sharing the data on cloud, or can be used to extend file server storage (windows server only) by syncing the data to the cloud when the capacity of on-prem disk is used by 80% for example.

- 3- Queue: used for message queue to store the messages on the queue instead of the server.

- 4- Table: used with NO SQL databases (key-value).
##### Access tiering
- 1- Blob
	- Hot (frequently accessed, highest cost).
	- Cool (after 30 day).
	- Cold (after 90 day).
	- Archive (after 180 day) -> data becomes offline, so when you need to access it you have to move it from archive to higher tier first.
	>The cost of storage is decreasing from top to down, while the latency is increasing.

- 2- File
	- Hot.
	- Cool.
	- Transaction optimized.
#### Premium storage account
- using:
	- Block blob.
	- Page blob.
	- File.
#### Storage redundancy
- ##### Local redundant storage (LRS)
	- LRS stores data in three copies within a single data centre.
	- It protects data against disk or server failure only.
	- LRS is the cheapest redundancy option.
	- If the entire data centre fails, data may be lost.
	- LRS provides 11 nines durability (99.999999999%).
	- ![[Pasted image 20251223185612.png]]

- ##### Zone redundant storage (ZRS)
	- ZRS stores data synchronously across three availability zones.
	- It protects data from a complete availability zone failure.
	- ZRS provides higher availability than LRS.
	- ZRS is more expensive than LRS.
	- ZRS provides 12 nines durability (99.9999999999%).
	- ![[Pasted image 20251223185632.png]]

- ##### Geo redundant storage (GRS)
	- GRS stores data in a primary region and replicates it to a secondary region.
	- Data is stored as six copies in total (3 primary + 3 secondary).
	- Replication to the secondary region is asynchronous (data takes time to sync).
	- GRS protects data from regional disasters.
	- Read access to the secondary region is not available by default.
	- It is 2 LRS.
	- GRS provides 16 nines durability (99.99999999999999%).
	- Read access to the secondary region during outage (if enabled) -> RA-GRZ.
	- ![[Pasted image 20251223185652.png]]

- ##### Geo-Zone-redundant storage (GZRS)
	-  GZRS combines ZRS and GRS together.
	- Data is stored across availability zones in the primary region.
	- Data is also replicated to a secondary region for disaster recovery (LRS).
	- GZRS provides the highest level of availability and durability.
	- It is the most expensive redundancy option.
	- Replication to the secondary region is asynchronous.
	- GZRS also provides 16 nines durability (99.99999999999999%).
	- Read access to the secondary region during outage (if enabled) -> RA-GZRS.
	- ![[Pasted image 20251223185758.png]]

---
### Entra ID
- Identity and access management service.
- it is like Active Directory but on the cloud.
- When we make an azure subscription, there is Entra ID created for the account
	- Ex: saif@oulook.com.onmicrosoft.77d9dfs348vd82
- This domain is complex and hard to be used by the users to login, so you buy a domain and assign it in the account so the user can log with this new domain
	- Ex: saif@outlook.com.abcstore
- This Entra ID is the domain on the cloud you can add users, groups, application and devices to it.
- Types of user:
	- 1- cloud based -> you create the user on the cloud
	- 2- Guest (External) -> add user to the cloud domain who isn't in my organization
	- 3- Synced -> users come from on-prem active directory.
- If I have on-prem domain and want to move the user on the cloud domain we use Entra connect sync service, they will be transferred on cloud, but the problem is that their domains will be the on-prem domain (saif.local.com), so we configure unique principe name (UPN) which making their users with the cloud domain (saif.abcstore).
- Entra ID offers single-sign-on (SSO) as the user sign in once and access all devices and Apps easily.
---
### VPN
- Secure connectivity service in Azure.
- Uses encrypted tunnels over the public internet.
- Enables hybrid cloud and remote access.
- Types of Azure VPN:
	- ##### Site-to-Site (S2S) VPN
		- On-Prem Network ↔ Azure VNet
		- Always-on connection
		- Uses IPsec/IKE
		- Common in hybrid environments
		-  Company datacentre connected to Azure VMs
	- ##### Point-to-Site (P2S) VPN
		- User device ↔ Azure VNet
		- Client-based VPN
		- Uses SSL or IKEv2
		- Good for remote employees
		- Employee laptop connecting securely to Azure
	- ##### VNet-to-VNet VPN
		- Azure VNet ↔ Azure VNet
	- Connects VNets across:
		- Regions
		- Subscriptions
		- Uses IPsec